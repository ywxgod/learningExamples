{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2cf7410858cdd6a8f768","webpack:///./src/service/BaseCommand.js","webpack:///./src/event/EventBus.js","webpack:///./src/utils/IDUtil.js","webpack:///./src/utils/FunUtil.js","webpack:///./src/service/AjaxService.js","webpack:///./index.js","webpack:///./src/controller/VueMediator.js","webpack:///./src/event/EventDispatcher.js","webpack:///./src/controller/BaseMediator.js","webpack:///./src/model/BaseModel.js","webpack:///./src/service/AjaxCommand.js","webpack:///./src/service/BaseService.js","webpack:///external {\"commonjs\":\"axios\",\"commonjs2\":\"axios\",\"amd\":\"axios\",\"root\":\"axios\"}","webpack:///./src/service/SimpleCommand.js"],"names":["BaseCommand","error","target","eType","rest","getInstance","$emit","EventBus","_instance","IDUtil","d","Date","getTime","uuid","replace","c","r","Math","random","floor","toString","FunUtil","obj","args","Array","prototype","slice","call","arguments","fun","shift","apply","source","instance","t","config","constructor","methods","AjaxService","_defaults","value","Object","assign","_axios","create","defaults","url","method","opts","data","params","indexOf","Error","promise","then","cmd","success","response","catch","fail","context","timeout","BaseModel","AjaxCommand","SimpleCommand","VueMediator","executeCommand","mapCommands","isCmd","CmdClass","execute","cmdMap","map","i","cmdObj","oriArgs","$data","item","$attachEvent","_mediator","attachEvent","$callEvent","callEvent","$detachEvent","off","$mapEvents","mounted","beforeCreate","beforeDestroy","destroy","EventDispatcher","_evts","type","handler","eId","count","_count","eInfos","$getEventInfosByType","n","length","payloads","infos","hasOwnProperty","push","sort","info1","info2","BaseMediator","callback","$on","Event","eInfo","_addCmdMap","_addEvtMap","bind","partial","traceId","info","$off","names","getOwnPropertyNames","name","clear","_vm","evtBus","service","showError","BaseService","_cmd"],"mappings":"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","file":"vue-mec.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"axios\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"axios\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueMec\"] = factory(require(\"axios\"));\n\telse\n\t\troot[\"VueMec\"] = factory(root[\"axios\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_12__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2cf7410858cdd6a8f768","import {EventBus} from '../event/EventBus';\r\n\r\nexport class BaseCommand{\r\n\r\n    execute(){\r\n\r\n    }\r\n\r\n    showError(error){\r\n        \r\n    }\r\n\r\n    $callEvent(target, eType,...rest){\r\n        EventBus.getInstance().$emit(eType,...rest);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/BaseCommand.js","import {EventDispatcher} from './EventDispatcher';\r\n\r\nexport class EventBus extends EventDispatcher{\r\n\r\n    static _instance = null;\r\n    \r\n    static getInstance(){\r\n\r\n        if(EventBus._instance===null){\r\n            EventBus._instance = new EventBus();\r\n        }\r\n        return EventBus._instance;\r\n\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/event/EventBus.js","export class IDUtil{\r\n\r\n    static uuid(){\r\n        let d = new Date().getTime();\r\n        let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n            let r = (d + Math.random()*16)%16 | 0;\r\n            d = Math.floor(d/16);\r\n            return (c=='x' ? r : (r&0x3|0x8)).toString(16);\r\n        });\r\n        return uuid;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/IDUtil.js","export class FunUtil{\r\n\r\n    static isFun(obj){\r\n        return typeof obj === 'function';\r\n    }\r\n\r\n    static partial(){\r\n\t\tlet args = Array.prototype.slice.call(arguments);\r\n\t\tlet fun = args[0];\r\n\t\targs.shift();\r\n\t\tif(typeof fun !== 'function') {return;}\r\n\t\treturn function(){\r\n\t\t\treturn fun.apply(this, [...args,...arguments]);\r\n\t\t};\r\n\t}\r\n\r\n\tstatic single(source){\r\n\t\tvar instance = null;\r\n\t\tvar t = function(config){\r\n\t\t\tif (!instance)\r\n\t\t\t\tinstance = new source({});\r\n\t\t\treturn instance;\r\n\t\t};\r\n\t\tt.prototype = source.prototype;\r\n\t\tt.prototype.constructor = source;\r\n\t\treturn t;\r\n\t}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/FunUtil.js","import {BaseService} from './BaseService';\r\nimport axios from 'axios';\r\n\r\nlet methods = ['get','post','delete','put'];\r\n\r\nexport class AjaxService extends BaseService{\r\n\r\n    static _defaults = {\r\n        timeout: 3000\r\n    };\r\n\r\n    static get defaults(){\r\n        return AjaxService._defaults;\r\n    };\r\n    static set defaults(value){\r\n        AjaxService._defaults = Object.assign(AjaxService._defaults, value);\r\n    }\r\n\r\n    constructor(){\r\n        super(...arguments);\r\n        this._axios = axios.create(Object.assign({},AjaxService.defaults));\r\n    }\r\n\r\n    promise(url,method='get',opts={data:{},params:{}}){\r\n        if(!~methods.indexOf(method)){\r\n            throw new Error('invalid method '+ method);\r\n        }\r\n        return this._axios[method](url,opts);\r\n    }\r\n\r\n    send(url,method='get',opts={data:{},params:{}}){\r\n        let promise = this.promise(...arguments);\r\n        return promise\r\n            .then(response=>{\r\n                this.cmd.success(response);\r\n            })\r\n            .catch(error=>{\r\n                  this.cmd.fail(error);\r\n            });\r\n    }\r\n\r\n    ajax(url,method='get',opts={data:{},params:{}}){\r\n        let promise = this.promise(...arguments);\r\n        return function(success,fail,context){\r\n            context = context||null;\r\n            return promise\r\n                .then(response=>{\r\n                    success&&success.call(context,response);\r\n                    promise = null;\r\n                })\r\n                .catch(error=>{\r\n                    fail&&fail.call(context,error);\r\n                    promise = null;\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/AjaxService.js","import {VueMediator,executeCommand,mapCommands} from './src/controller/VueMediator';\r\nimport {EventBus} from './src/event/EventBus';\r\nimport {BaseModel} from './src/model/BaseModel';\r\nimport {AjaxCommand} from './src/service/AjaxCommand';\r\nimport {AjaxService} from './src/service/AjaxService';\r\nimport {BaseCommand} from './src/service/BaseCommand';\r\nimport {SimpleCommand} from './src/service/SimpleCommand';\r\nimport {IDUtil} from './src/utils/IDUtil';\r\nimport {FunUtil} from './src/utils/FunUtil';\r\n/* const VueMediatorObj = require('./src/controller/VueMediator');\r\nexport const EventBus = require('./src/event/EventBus');\r\nexport const BaseModel = require('./src/model/BaseModel');\r\nexport const AjaxCommand = require('./src/service/AjaxCommand');\r\nexport const AjaxService = require('./src/service/AjaxService');\r\nexport const BaseCommand = require('./src/service/BaseCommand');\r\nexport const SimpleCommand = require('./src/service/SimpleCommand');\r\nexport const IDUtil = require('./src/utils/IDUtil');\r\nexport const FunUtil = require('./src/utils/FunUtil');\r\nexport const VueMediator = VueMediatorObj.VueMediator;\r\nexport const executeCommand = VueMediatorObj.executeCommand;\r\nexport const mapCommands = VueMediatorObj.mapCommands; */\r\n\r\nexport default {\r\n    EventBus,\r\n    BaseModel,\r\n    AjaxCommand,\r\n    AjaxService,\r\n    BaseCommand,\r\n    SimpleCommand,\r\n    IDUtil,\r\n    FunUtil,\r\n    VueMediator,\r\n    executeCommand,\r\n    mapCommands\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import {BaseCommand} from '../service/BaseCommand';\r\nimport {BaseMediator} from './BaseMediator';\r\n\r\nlet isCmd = (CmdClass)=>{\r\n    return CmdClass && (CmdClass.prototype instanceof BaseCommand);\r\n};\r\n\r\n\r\nexport function executeCommand(CmdClass, ...params){\r\n    if(!CmdClass) {return;}\r\n    if(typeof CmdClass !== 'function') {return;}\r\n    if(!isCmd(CmdClass)) throw new Error('invalid command class');\r\n    let cmd = new CmdClass();\r\n    return cmd.execute.apply(cmd, params);\r\n}\r\n\r\nexport function mapCommands(cmdMap){\r\n    let map = {};\r\n    for(let i in cmdMap){\r\n        let cmdObj = cmdMap[i];\r\n        let CmdClass=null;\r\n        let args=[];\r\n        if(cmdObj.cmd && isCmd(cmdObj.cmd)){\r\n            CmdClass = cmdObj.cmd;\r\n            args = cmdObj.args||[];\r\n            map[i] = function(){\r\n                let oriArgs = [...arguments,this.$data,...args];//原参数+vm.data+传参\r\n                oriArgs = oriArgs.map(item=>{\r\n                    if(typeof item === 'function'){\r\n                        return item.call(this);\r\n                    }\r\n                    return item;\r\n                });\r\n                executeCommand(CmdClass,...oriArgs);\r\n            }\r\n        }else if(isCmd(cmdObj)){\r\n            CmdClass = cmdObj;\r\n            map[i] = function(){\r\n                let oriArgs = [...arguments,this.$data];\r\n                executeCommand(CmdClass,...oriArgs);\r\n            }\r\n        }else{\r\n            throw new Error('unknow command type.');\r\n        }\r\n    }\r\n    return map;\r\n}\r\n\r\nexport const VueMediator = {\r\n\r\n    methods:{\r\n        $attachEvent(){\r\n            return this._mediator.attachEvent(...arguments);\r\n        },\r\n        $callEvent(){\r\n            return this._mediator.callEvent(...arguments);\r\n        },\r\n        $detachEvent(){\r\n            return this._mediator.off(...arguments);\r\n        },\r\n        $mapEvents(){\r\n\r\n        }\r\n    },\r\n\r\n    mounted(){\r\n        this.$mapEvents();\r\n    },\r\n\r\n    beforeCreate(){\r\n        this._mediator = new BaseMediator();\r\n    },\r\n\r\n    beforeDestroy(){\r\n        this._mediator.destroy();\r\n        this._mediator = null;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controller/VueMediator.js","import {IDUtil} from '../utils/IDUtil';\r\nimport {BaseCommand} from '../service/BaseCommand';\r\n\r\nexport class EventDispatcher{\r\n\r\n\r\n    static _count = 0;\r\n\r\n    constructor(){\r\n        this._evts = {};\r\n    }\r\n\r\n    $on(type, handler, ...data){\r\n        if(typeof handler !== 'function'){\r\n            throw new Error('expects handler as a function.');\r\n        }\r\n        let eId = IDUtil.uuid();\r\n        let count = EventDispatcher._count++;\r\n        this._evts[eId] = {type,handler,data,count};\r\n        return eId;\r\n    }\r\n\r\n    $off(eId){\r\n        if(!eId) {return false;}\r\n        if(this._evts[eId]){\r\n            this._evts[eId] = null;\r\n            return delete this._evts[eId];\r\n        }\r\n        return false;\r\n    }\r\n\r\n    $emit(type, ...payloads){\r\n        let eInfos = this.$getEventInfosByType(type);\r\n        let n = eInfos.length;\r\n        for(let i=0;i<n;i++){\r\n            let {handler,data} = eInfos[i];\r\n\t\t\tlet args = [...data, ...payloads];\r\n            handler(...args);\r\n        }\r\n    }\r\n\r\n    $hasEvent(type){\r\n        let eInfos = this.$getEventInfosByType(type);\r\n        return !!eInfos.length;\r\n    }\r\n\r\n    $getEventInfosByType(type){\r\n        let infos = [];\r\n        for(let eId in this._evts){\r\n            if(this._evts.hasOwnProperty(eId)){\r\n                let {type:eType} = this._evts[eId];\r\n                if(eType === type){\r\n                    infos.push(this._evts[eId]);\r\n                }\r\n            }\r\n        }\r\n        return infos.sort((info1,info2)=>{\r\n            return info1.count - info2.count;\r\n        });\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/event/EventDispatcher.js","import {EventBus} from '../event/EventBus';\r\nimport {IDUtil} from '../utils/IDUtil';\r\nimport {BaseCommand} from '../service/BaseCommand';\r\nimport {FunUtil} from '../utils/FunUtil';\r\n\r\nexport class BaseMediator{\r\n\r\n    constructor(){\r\n        this._evts = {};\r\n    }\r\n\r\n    callEvent(target,eType,...data){\r\n        if(!target){\r\n            target = EventBus.getInstance();\r\n        }\r\n        if(typeof target.$emit !== 'function'){\r\n            throw new Error('target must extends EventDispatcher or an instance of Vue');\r\n        }\r\n        target.$emit(eType, ...data);\r\n    }\r\n\r\n    attachEvent(target,eType,callback,...data){\r\n        if(!target){\r\n            target = EventBus.getInstance();\r\n\t\t}\r\n        if(typeof target.$on !== 'function'){\r\n            throw new Event(`target must extends EventDispatcher or an instance of Vue`)\r\n        }\r\n        let eId = IDUtil.uuid();\r\n        let isCmd = callback.prototype instanceof BaseCommand;\r\n        let eInfo = isCmd?this._addCmdMap(target,eType,callback,data):this._addEvtMap(target,eType,callback,data);\r\n        this._evts[eId] = eInfo;\r\n        return eId;\r\n    }\r\n\r\n    _addCmdMap(target,eType,callback,data){\r\n        var cmd = new callback();\r\n\t\tif(!cmd.execute || (typeof cmd.execute !== 'function')) {\r\n\t\t\tthrow new Error('The command must implement method [execute]');\r\n\t\t}\r\n\t\treturn this._addEvtMap(target, eType, cmd.execute.bind(cmd), data);\r\n    }\r\n\r\n    _addEvtMap(target,eType,callback,data){\r\n        var args = [callback,...data];\r\n        let handler = FunUtil.partial(...args);\r\n        var traceId = target.$on(eType, handler);\r\n        if(!traceId||(typeof traceId !== 'string')) traceId = '';\r\n\t\treturn {traceId,target,eType,handler};\r\n    }\r\n\r\n    off(eId){\r\n        if(!eId){return;}\r\n        let info = this._evts[eId];\r\n        if(!info){return;}\r\n        let {target,eType,callback,traceId} = info;\r\n        if(!traceId) {\r\n            target.$off(eType,callback);\r\n        }else{\r\n            target.$off(traceId);\r\n        }\r\n        delete this._evts[eId];\r\n    }\r\n\r\n    clear(){\r\n        let names = Object.getOwnPropertyNames(this._evts);\r\n        let n = names.length;\r\n        for(let i=0;i<n;i++){\r\n            let name = names[i];\r\n            this.off(name);\r\n        }\r\n        this._evts = {};\r\n    }\r\n\r\n    destroy(){\r\n        this.clear();\r\n        this._vm = null;\r\n    }\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controller/BaseMediator.js","import {EventBus} from '../event/EventBus';\r\n\r\nexport class BaseModel{\r\n    constructor(){\r\n        this.evtBus = EventBus.getInstance();        \r\n    }\r\n\r\n    $callEvent(eType,...rest){\r\n        this.evtBus.$emit(eType,...rest);\r\n    }\r\n\r\n    reset(){\r\n        \r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/BaseModel.js","import {BaseCommand} from './BaseCommand';\r\nimport {AjaxService} from './AjaxService';\r\n\r\nexport class AjaxCommand extends BaseCommand{\r\n\r\n    getService(){\r\n        let service = new AjaxService(this);\r\n        return service;\r\n    }\r\n\r\n    success(response){\r\n        \r\n    }\r\n\r\n    fail(error){\r\n        this.showError(error);\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/AjaxCommand.js","export class BaseService{\r\n\r\n    constructor(cmd){\r\n        this._cmd = cmd;\r\n    }\r\n\r\n    get cmd(){ return this._cmd; }\r\n\r\n    send(){\r\n\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/BaseService.js","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"axios\",\"commonjs2\":\"axios\",\"amd\":\"axios\",\"root\":\"axios\"}\n// module id = 12\n// module chunks = 0","import {BaseCommand} from './BaseCommand';\r\nexport class SimpleCommand extends BaseCommand{\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/SimpleCommand.js"],"sourceRoot":""}